# ADR 001: プロジェクト概要と要件定義

## ステータス
提案中

## 日付
2025-10-19

## コンテキスト

個人の生活データ（健康データ、カラオケ採点など）を一元管理するデータハブを構築する。
様々なデータソースから情報を取り込み、可視化・分析するWebアプリケーション。
オンプレでの開発経験は豊富だが、AWS環境での本格的なシステム構築は初めてのため、コスパと学習効果を両立した構成を検討する。

## 要件

### 機能要件

1. **血圧計測定データ管理** (日次)
   - CSVファイルからデータ取込
   - データベースへの格納

2. **体組成計測定データ管理** (日次)
   - CSVファイルからデータ取込
   - データベースへの格納

3. **健康診断結果管理** (年次)
   - 画像ファイルのアップロード
   - OCRによるデータ抽出
   - データベースへの格納

4. **カラオケ採点データ管理** (週次)
   - カラオケサイトへのログイン
   - スクレイピングによるデータ取得
   - 画像解析
   - データベースへの格納

### 技術スタック要件

#### バックエンド
- 言語: Kotlin
- フレームワーク: Spring Boot
- SQLマッパー: Doma
- データベース: PostgreSQL

#### フロントエンド
- フレームワーク: React系
- 言語: TypeScript
- ルーティング: React Router (SPA想定)

#### 認証
- AWS Cognito
- ソーシャルログイン対応 (Google, X/Twitter)
  - 学習目的のため最後に実装

### 非機能要件

1. **利用者**: 個人利用のみ (1ユーザー)
2. **コスト**: 月額利用料を極力抑える
3. **運用**: フルマネージドサービスを優先
4. **環境**:
   - 開発環境: AWS + EC2
   - 本番環境: AWS

## 初期検討内容

### データベース候補
- ❌ Aurora: 高機能だが料金が高い
- ✅ RDS PostgreSQL (t4g.micro)
- ✅ Supabase (フルマネージド、無料枠あり)
- △ EC2 + Docker PostgreSQL (バックアップ・管理コストが高い)

### バックエンド候補
- △ ECS/Fargate: 最小構成でも月額$15-30、常時起動が不要なら割高
- ✅ Lambda + API Gateway: コールドスタートの懸念あるが低コスト
- ✅ App Runner: コンテナ自動スケール、最小構成で$2-10/月

### 定期実行・非同期処理
- ✅ EventBridge + Lambda
- ✅ Step Functions (ワークフロー管理)
- SNS、SQSも必要に応じて検討

### フロントエンド
- ✅ S3 + CloudFront: 最もコスパが良い
- △ Amplify Hosting: 簡単だが若干高め
- SEO不要のためSPAで十分

## 決定事項

(まだ決定していない - 次のADRで検討)

## 影響

このプロジェクトにより以下を学習・習得できる:
- AWSサーバーレスアーキテクチャ
- Kotlin + Spring BootのLambda実行
- React + TypeScriptによるモダンなSPA開発
- Cognitoを使った認証・ソーシャルログイン
- AWS各種マネージドサービスの活用

## メモ

- Supabase = PostgreSQL + 認証 + ストレージのフルマネージドサービス
- GraalVM Native Imageでコールドスタート時間を短縮可能
